<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Major Version Plan | Google Cloud APIs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Major Version Plan | Google Cloud APIs ">
    <meta name="generator" content="docfx 2.39.1.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="major-version-plan">Major Version Plan</h1>

<p>The current (as of October 2019) versions of all Google Cloud client
libraries are incompatible with Grpc.Core.Api 2.x - which means
they&#39;re incompatible with anyone trying to use the Microsoft gRPC
libraries in .NET Core 3.0.</p>
<p>This is effectively a forcing factor for us to make a series of
breaking changes, and bump the major version of all libraries. While
we <em>are</em> making forced breaking changes, we&#39;ll take the opportunity to make
a few other improvements at the same time.</p>
<p>The bulk of the changes will be within
<a href="https://github.com/googleapis/gax-dotnet">GAX</a> as that&#39;s where a
lot of our common code for interacting with gRPC resides, but there
will be some API-specific changes too.</p>
<h2 id="changes">Changes</h2>
<p>We plan on making the following changes:</p>
<ul>
<li>Upgrade the Grpc.Core dependency to the latest 2.x release.</li>
<li>Remove the System.Interactive.Async dependency, replacing it with
Microsoft.Bcl.AsyncInterfaces.</li>
<li>Change our target platforms to .NET 4.6.1 and .NET Standard 2.0</li>
<li>Revisit our retry configuration to bring it in line with gRPC
&quot;native&quot; retry configuration.</li>
<li>Remove all obsolete members from all libraries.</li>
<li>Remove all retry-related members that are not generated by the new
microgenerator.</li>
<li>Remove method signatures in generated API classes with nullable
primitive types representing optional parameters. The new overloads
just use the non-nullable primitive types.</li>
<li>Where individual APIs have their own copies of common resource
names (such as LocationName), update them to use the common
resource names instead.</li>
</ul>
<h2 id="considerations-around-dropping-net-45-support">Considerations around dropping .NET 4.5 support</h2>
<p>While dropping support for .NET Standard 1.x is reasonably
uncontroversial, dropping support for .NET 4.5 may have a greater
impact on our customers.</p>
<p>The <a href="https://www.nuget.org/packages/Microsoft.Bcl.AsyncInterfaces">Microsoft.Bcl.AsyncInterfaces NuGet
package</a>
does not support .NET 4.5, which makes it hard for us to do so. We
intend to release the new libraries without .NET 4.5 support as that
will be the technically-simplest approach, but we have a backup plan
to reintroduce .NET 4.5 compatiblity if we absolutely have to in
order to meet customer demands. If this happens, it&#39;s very likely
that we&#39;d only release individual API libraries where there&#39;s
significant demand, to improve the likelihood of being able to drop
.NET 4.5 in future major versions.</p>
<h2 id="timing">Timing</h2>
<p>Our tentative plan is as follows:</p>
<p>Already done:</p>
<ul>
<li>Release final GAX packages for the 2.x line (2.10.0)</li>
<li>Change &quot;master&quot; branch in GAX to be the next-major-version</li>
<li>Update GAX target frameworks</li>
<li>Update GAX dependencies, rewriting code where necessary</li>
<li>Remove obsolete members in GAX</li>
<li>Change retry representation in GAX</li>
<li>Create next-major-version branch in google-cloud-dotnet</li>
<li>Create next-major-version branch in the generator</li>
<li>Update all dependencies to GAX 3.0 (fetched locally for build)</li>
<li>Migrate API libraries to GAX 3.0</li>
</ul>
<p>In progress, aiming for end-of-2019:</p>
<ul>
<li>Create &quot;final for this major version&quot; releases for all APIs.
(We&#39;re nearly finished with this; just a few APIs to go.)</li>
<li>Migrate all APIs to the microgenerator</li>
<li>Check any remaining obsolete members and resource names, e.g.
where LocationName doesn&#39;t use GAX</li>
</ul>
<p>Coming up in 2020:</p>
<ul>
<li>Early January: publish alpha releases of all APIs and GAX</li>
<li>If all goes well, in late January: publish beta releases of all APIs and GAX</li>
<li>Based on betas, but hopefully mid/late February: public GA releases of all APIs and GAX</li>
</ul>
<h2 id="feedback">Feedback</h2>
<p>We welcome feedback on this plan. Please <a href="https://github.com/googleapis/google-cloud-dotnet/issues/new/choose">raise an
issue</a>
to let us know how this plan will affect you.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
