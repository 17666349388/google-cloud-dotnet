<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class SessionPool
   | Google.Cloud.Spanner.V1 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class SessionPool
   | Google.Cloud.Spanner.V1 ">
    <meta name="generator" content="docfx 2.28.2.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Google.Cloud.Spanner.V1.SessionPool">
  
  
  <h1 id="Google_Cloud_Spanner_V1_SessionPool" data-uid="Google.Cloud.Spanner.V1.SessionPool" class="text-break">Class SessionPool
  </h1>
  <div class="markdown level0 summary"><p>The SessionPool is the preferred method of managing Spanner Sessions.
It performs pooling of sessions with an evict timer along with configurable settings to control the maximum
number of pooled and active sessions.
To create a session using the sessionpool, use the extension method on SpannerClient.</p>
<p>var session = await SpannerClient.CreateSessionFromPoolAsync(project, spannerInstance, database, cancellationtoken);</p>
<p>To release a session back to the sessionpool:</p>
<p>session.ReleaseToPool();</p>
<p>If you use the SessionPool, you must make sure sessions are properly released back into the pool and are not simply GC&apos;d.
Allowing a session to GC will incur penalties on the current process as the session will count towards the maximum allowed
and it will incur a penalty on other Spanner processes because it will be an hour before the server frees the session if 
it&apos;s not properly deleted.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><span class="xref">System.Object</span></div>
    <div class="level1"><span class="xref">SessionPool</span></div>
  </div>
  <div classs="implements">
    <h5>Implements</h5>
    <div><span class="xref">System.IDisposable</span></div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <span class="xref">System.Object.ToString()</span>
    </div>
    <div>
      <span class="xref">System.Object.GetHashCode()</span>
    </div>
    <div>
      <span class="xref">System.Object.GetType()</span>
    </div>
    <div>
      <span class="xref">System.Object.MemberwiseClone()</span>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Google.Cloud.Spanner.V1.html">Google.Cloud.Spanner.V1</a></h6>
  <h6><strong>Assembly</strong>: Google.Cloud.Spanner.V1.dll</h6>
  <h5 id="Google_Cloud_Spanner_V1_SessionPool_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public sealed class SessionPool : IDisposable</code></pre>
  </div>
  <h3 id="properties">Properties
  </h3>
  <a id="Google_Cloud_Spanner_V1_SessionPool_CurrentActiveSessions_" data-uid="Google.Cloud.Spanner.V1.SessionPool.CurrentActiveSessions*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_CurrentActiveSessions" data-uid="Google.Cloud.Spanner.V1.SessionPool.CurrentActiveSessions">CurrentActiveSessions</h4>
  <div class="markdown level1 summary"><p>The current number of active sessions in use by the application.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int CurrentActiveSessions { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_V1_SessionPool_CurrentPooledSessions_" data-uid="Google.Cloud.Spanner.V1.SessionPool.CurrentPooledSessions*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_CurrentPooledSessions" data-uid="Google.Cloud.Spanner.V1.SessionPool.CurrentPooledSessions">CurrentPooledSessions</h4>
  <div class="markdown level1 summary"><p>The current number of sessions in the Session Pool.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int CurrentPooledSessions { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_V1_SessionPool_Default_" data-uid="Google.Cloud.Spanner.V1.SessionPool.Default*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_Default" data-uid="Google.Cloud.Spanner.V1.SessionPool.Default">Default</h4>
  <div class="markdown level1 summary"><p>The default session pool, used in almost all cases other than testing.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static SessionPool Default { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.SessionPool.html">SessionPool</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_V1_SessionPool_Options_" data-uid="Google.Cloud.Spanner.V1.SessionPool.Options*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_Options" data-uid="Google.Cloud.Spanner.V1.SessionPool.Options">Options</h4>
  <div class="markdown level1 summary"><p>The options for this session pool.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public SessionPoolOptions Options { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.SessionPoolOptions.html">SessionPoolOptions</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
  </h3>
  <a id="Google_Cloud_Spanner_V1_SessionPool_CloseAsync_" data-uid="Google.Cloud.Spanner.V1.SessionPool.CloseAsync*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_CloseAsync_Google_Cloud_Spanner_V1_Session_" data-uid="Google.Cloud.Spanner.V1.SessionPool.CloseAsync(Google.Cloud.Spanner.V1.Session)">CloseAsync(Session)</h4>
  <div class="markdown level1 summary"><p>Called to close a session and release it without putting it back into the pool.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Task CloseAsync(Session session)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.Session.html">Session</a></td>
        <td><span class="parametername">session</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_V1_SessionPool_CreateSessionFromPoolAsync_" data-uid="Google.Cloud.Spanner.V1.SessionPool.CreateSessionFromPoolAsync*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_CreateSessionFromPoolAsync_Google_Cloud_Spanner_V1_SpannerClient_System_String_System_String_System_String_Google_Cloud_Spanner_V1_TransactionOptions_System_Threading_CancellationToken_" data-uid="Google.Cloud.Spanner.V1.SessionPool.CreateSessionFromPoolAsync(Google.Cloud.Spanner.V1.SpannerClient,System.String,System.String,System.String,Google.Cloud.Spanner.V1.TransactionOptions,System.Threading.CancellationToken)">CreateSessionFromPoolAsync(SpannerClient, String, String, String, TransactionOptions, CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Allocates a session from the pool if possible, or creates a new Spanner Session.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Task&lt;Session&gt; CreateSessionFromPoolAsync(SpannerClient spannerClient, string project, string spannerInstance, string spannerDatabase, TransactionOptions options, CancellationToken cancellationToken)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.SpannerClient.html">SpannerClient</a></td>
        <td><span class="parametername">spannerClient</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">project</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">spannerInstance</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">spannerDatabase</span></td>
        <td></td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.TransactionOptions.html">TransactionOptions</a></td>
        <td><span class="parametername">options</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<a class="xref" href="Google.Cloud.Spanner.V1.Session.html">Session</a>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_V1_SessionPool_Dispose_" data-uid="Google.Cloud.Spanner.V1.SessionPool.Dispose*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_Dispose" data-uid="Google.Cloud.Spanner.V1.SessionPool.Dispose">Dispose()</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Dispose()</code></pre>
  </div>
  <h5 class="implements">Implements</h5>
      <div><span class="xref">System.IDisposable.Dispose()</span></div>
  <a id="Google_Cloud_Spanner_V1_SessionPool_IsSessionExpired_" data-uid="Google.Cloud.Spanner.V1.SessionPool.IsSessionExpired*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_IsSessionExpired_Google_Cloud_Spanner_V1_Session_" data-uid="Google.Cloud.Spanner.V1.SessionPool.IsSessionExpired(Google.Cloud.Spanner.V1.Session)">IsSessionExpired(Session)</h4>
  <div class="markdown level1 summary"><p>Returns true if the given session has been marked as expired.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool IsSessionExpired(Session session)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.Session.html">Session</a></td>
        <td><span class="parametername">session</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Boolean</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_V1_SessionPool_MarkSessionExpired_" data-uid="Google.Cloud.Spanner.V1.SessionPool.MarkSessionExpired*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_MarkSessionExpired_Google_Cloud_Spanner_V1_Session_" data-uid="Google.Cloud.Spanner.V1.SessionPool.MarkSessionExpired(Google.Cloud.Spanner.V1.Session)">MarkSessionExpired(Session)</h4>
  <div class="markdown level1 summary"><p>Marks a session as expired so that it will never be pooled in the sessionpool</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void MarkSessionExpired(Session session)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.Session.html">Session</a></td>
        <td><span class="parametername">session</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_V1_SessionPool_ReleaseAllAsync_" data-uid="Google.Cloud.Spanner.V1.SessionPool.ReleaseAllAsync*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_ReleaseAllAsync" data-uid="Google.Cloud.Spanner.V1.SessionPool.ReleaseAllAsync">ReleaseAllAsync()</h4>
  <div class="markdown level1 summary"><p>Releases all pooled sessions and frees resources on the server.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Task ReleaseAllAsync()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_V1_SessionPool_ReleaseToPool_" data-uid="Google.Cloud.Spanner.V1.SessionPool.ReleaseToPool*"></a>
  <h4 id="Google_Cloud_Spanner_V1_SessionPool_ReleaseToPool_Google_Cloud_Spanner_V1_SpannerClient_Google_Cloud_Spanner_V1_Session_" data-uid="Google.Cloud.Spanner.V1.SessionPool.ReleaseToPool(Google.Cloud.Spanner.V1.SpannerClient,Google.Cloud.Spanner.V1.Session)">ReleaseToPool(SpannerClient, Session)</h4>
  <div class="markdown level1 summary"><p>Releases a session back into the pool, possibly causing another entry to be evicted if the maximum pool size has been
reached.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void ReleaseToPool(SpannerClient client, Session session)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.SpannerClient.html">SpannerClient</a></td>
        <td><span class="parametername">client</span></td>
        <td></td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.V1.Session.html">Session</a></td>
        <td><span class="parametername">session</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
