<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class CloudTrace
   | Google.Cloud.Diagnostics.AspNet </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class CloudTrace
   | Google.Cloud.Diagnostics.AspNet ">
    <meta name="generator" content="docfx 2.24.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace">
  
  
  <h1 id="Google_Cloud_Diagnostics_AspNet_CloudTrace" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace" class="text-break">Class CloudTrace
  </h1>
  <div class="markdown level0 summary"><p>Google Trace for ASP.NET Applications.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><span class="xref">System.Object</span></div>
    <div class="level1"><span class="xref">CloudTrace</span></div>
  </div>
  <div classs="implements">
    <h5>Implements</h5>
    <div><span class="xref">System.IDisposable</span></div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <span class="xref">System.Object.ToString()</span>
    </div>
    <div>
      <span class="xref">System.Object.GetHashCode()</span>
    </div>
    <div>
      <span class="xref">System.Object.GetType()</span>
    </div>
    <div>
      <span class="xref">System.Object.MemberwiseClone()</span>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Google.Cloud.Diagnostics.AspNet.html">Google.Cloud.Diagnostics.AspNet</a></h6>
  <h6><strong>Assembly</strong>: Google.Cloud.Diagnostics.AspNet.dll</h6>
  <h5 id="Google_Cloud_Diagnostics_AspNet_CloudTrace_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public sealed class CloudTrace : IDisposable</code></pre>
  </div>
  <h5 id="Google_Cloud_Diagnostics_AspNet_CloudTrace_remarks"><strong>Remarks</strong></h5>
  <div class="markdown level0 remarks"><p>Handles tracing for ASP.NET applications and sends data to the Stackdriver Trace API Reporting.</p>
<p>By default when initialized a small sampling of http requests will automatically be traced.  Additional
trace data can be collected manually.</p>
<p>Docs: <a href="https://cloud.google.com/trace/docs/">https://cloud.google.com/trace/docs/</a></p>
</div>
  <h5 id="Google_Cloud_Diagnostics_AspNet_CloudTrace_examples"><strong>Examples</strong></h5>
  <pre><code> public class Global : HttpApplication
 { 
      public override void Init()
      {
          base.Init();
          CloudTrace.Initialize(this, &quot;some-project-id&quot;);
      }
 }</code></pre>

  <pre><code>public void MakeHttpRequest()
{
    var traceHeaderHandler = CloudTrace.CreateTracingHttpMessageHandler();
    using (var httpClient = HttpClientFactory.Create(traceHeaderHandler))
    {
        ...
    }
}</code></pre>

  <pre><code>public void DoSomething()
{
    using (CloudTrace.Tracer.StartSpan(&quot;DoSomething&quot;))
    {
        ...
    }
}</code></pre>

  <h3 id="fields">Fields
  </h3>
  <h4 id="Google_Cloud_Diagnostics_AspNet_CloudTrace_Tracer" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace.Tracer">Tracer</h4>
  <div class="markdown level1 summary"><p>Gets the <a class="xref" href="Google.Cloud.Diagnostics.Common.IManagedTracer.html">IManagedTracer</a> for tracing. It can be used
for creating spans for a trace as well as adding meta data to them.
This <a class="xref" href="Google.Cloud.Diagnostics.Common.IManagedTracer.html">IManagedTracer</a> is a singleton.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static readonly IManagedTracer Tracer</code></pre>
  </div>
  <h5 class="fieldValue">Field Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Diagnostics.Common.IManagedTracer.html">IManagedTracer</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
  </h3>
  <a id="Google_Cloud_Diagnostics_AspNet_CloudTrace_CreateTracingHttpMessageHandler_" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace.CreateTracingHttpMessageHandler*"></a>
  <h4 id="Google_Cloud_Diagnostics_AspNet_CloudTrace_CreateTracingHttpMessageHandler" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace.CreateTracingHttpMessageHandler">CreateTracingHttpMessageHandler()</h4>
  <div class="markdown level1 summary"><p>Creates a <a class="xref" href="Google.Cloud.Diagnostics.Common.TraceHeaderPropagatingHandler.html">TraceHeaderPropagatingHandler</a> to propagate trace headers
in Http requests.
<example><p>
<pre><code>public void DoSomething()
{
    var traceHeaderHandler = CloudTrace.CreateTracingHttpMessageHandler();
    using (var httpClient = new HttpClient(traceHeaderHandler))
    {
        ...
    }
}</code></pre>
<p></example></p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static TraceHeaderPropagatingHandler CreateTracingHttpMessageHandler()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Diagnostics.Common.TraceHeaderPropagatingHandler.html">TraceHeaderPropagatingHandler</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Diagnostics_AspNet_CloudTrace_Dispose_" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace.Dispose*"></a>
  <h4 id="Google_Cloud_Diagnostics_AspNet_CloudTrace_Dispose" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace.Dispose">Dispose()</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Dispose()</code></pre>
  </div>
  <h5 class="implements">Implements</h5>
      <div><span class="xref">System.IDisposable.Dispose()</span></div>
  <a id="Google_Cloud_Diagnostics_AspNet_CloudTrace_Initialize_" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace.Initialize*"></a>
  <h4 id="Google_Cloud_Diagnostics_AspNet_CloudTrace_Initialize_System_Web_HttpApplication_System_String_Google_Cloud_Diagnostics_Common_TraceOptions_Google_Cloud_Trace_V1_TraceServiceClient_Google_Cloud_Diagnostics_Common_TraceDecisionPredicate_" data-uid="Google.Cloud.Diagnostics.AspNet.CloudTrace.Initialize(System.Web.HttpApplication,System.String,Google.Cloud.Diagnostics.Common.TraceOptions,Google.Cloud.Trace.V1.TraceServiceClient,Google.Cloud.Diagnostics.Common.TraceDecisionPredicate)">Initialize(HttpApplication, String, TraceOptions, TraceServiceClient, TraceDecisionPredicate)</h4>
  <div class="markdown level1 summary"><p>Initialize tracing for this application.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void Initialize(HttpApplication application, string projectId = null, TraceOptions options = null, TraceServiceClient client = null, TraceDecisionPredicate traceFallbackPredicate = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Web.HttpApplication</span></td>
        <td><span class="parametername">application</span></td>
        <td><p>The Http application.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">projectId</span></td>
        <td><p>Optional if running on Google App Engine or Google Compute Engine.
    The Google Cloud Platform project ID. If unspecified and running on GAE or GCE the project ID will be
    detected from the platform.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Cloud.Diagnostics.Common.TraceOptions.html">TraceOptions</a></td>
        <td><span class="parametername">options</span></td>
        <td><p>Optional trace options, if unset the default will be used.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">Google.Cloud.Trace.V1.TraceServiceClient</span></td>
        <td><span class="parametername">client</span></td>
        <td><p>Optional trace client, if unset the default will be used.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Cloud.Diagnostics.Common.TraceDecisionPredicate.html">TraceDecisionPredicate</a></td>
        <td><span class="parametername">traceFallbackPredicate</span></td>
        <td><p>Optional function to trace requests. If the trace header is not set
    then this function will be called to determine if a given request should be traced.  This will
    not override trace headers.</p>
</td>
      </tr>
    </tbody>
  </table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
