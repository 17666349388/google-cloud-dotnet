<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Breaking changes (Feb 2020) | Google Cloud APIs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Breaking changes (Feb 2020) | Google Cloud APIs ">
    <meta name="generator" content="docfx 2.50.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="breaking-changes-feb-2020">Breaking changes (Feb 2020)</h1>

<p>Prior to February 2020, all API client libraries targeted GAX
(Google.Api.Gax and related packages) version 2.x. As part of
supporting Grpc.Core 2.x and the <code>IAsyncEnumerable&lt;T&gt;</code> interface
that&#39;s compatible with C# 8, a new major version of GAX was
released, with the first beta in February 2020. This contains
breaking changes, and we&#39;ve taken advantage of the opportunity this
provides to make some separate breaking changes in code generation
at the same time.</p>
<p>This document provides a guide to these breaking changes, most of
which apply to most or all API libraries. Any breaking changes which
only affect a single API library are documented in the corresponding
version history instead.</p>
<h1 id="platform-support">Platform support</h1>
<p>GAX v3 supports .NET Standard 2.0 and .NET 4.6.1 (and higher
versions of each). (For reference, GAX v2 supported .NET Standard
1.3 or 1.5 depending on the exact package, and .NET 4.5.)</p>
<p>This means that if you want to use the API libraries targeting GAX
v3, you need to be using .NET Core 2.0 or .NET 4.6.1, or a higher
version of either of these.</p>
<h1 id="client-creation">Client creation</h1>
<p>Creating a client with the default endpoint, credentials, settings
etc is still supported via the static <code>Create</code> and <code>CreateAsync</code>
methods on the client class. If you need any customization, please
use the corresponding client builder class. For example:</p>
<pre><code class="lang-csharp">// Synchronous creation with defaults
var client1 = SpeechClient.Create();

// Asynchronous creation with defaults
var client2 = await SpeechClient.CreateAsync();

// Customized synchronous creation
var client3 = new SpeechClientBuilder
{
   UserAgent = &quot;custom-user-agent&quot;
}.Build();
</code></pre><h1 id="endpoints">Endpoints</h1>
<p>The previous GAX <code>ServiceEndpoint</code> class has been removed. Endpoints
are now specified as strings. For example:</p>
<pre><code class="lang-csharp">// Customized synchronous creation
var client3 = new SpeechClientBuilder
{
    Endpoint = &quot;sandbox.speech.googleapis.com&quot;
}.Build();
</code></pre><h1 id="retry-settings">Retry settings</h1>
<h2 id="retrysettings-and-backoffsettings-types">RetrySettings and BackoffSettings types</h2>
<p>The GAX v2 <code>RetrySettings</code> class contained two <code>BackoffSettings</code>
members, one for timeouts and one for backoff between attempts. A
separate <code>CallTiming</code> class contained the expiration and the retry
settings.</p>
<p>In GAX v3, <code>RetrySettings</code> is only about backoff, and contains the
multiplier, filter etc directly. This is based on the retry
specification from gRPC. The expiration is directly specified in
<code>CallSettings</code>.</p>
<h2 id="generated-methods-in-api-libraries">Generated methods in API libraries</h2>
<p>Previous versions exposed properties and methods for retry settings of
grouped operations, e.g. <code>IdempotentRetryFilter</code>,
<code>GetDefaultRetryBackoff()</code> and <code>GetDefaultTimeoutBackoff()</code>. These
are not generated by the new generator, and there is no equivalent.
Instead, use the settings applicable to individual RPCs.</p>
<h1 id="resource-names">Resource names</h1>
<h2 id="multi-pattern-resources">Multi-pattern resources</h2>
<p>When a resource name is represented by multiple patterns, the
previous generator created multiple resource name types and a
&quot;one-of&quot; type to represent &quot;one of those resource names&quot;. For
example, in the Logging.V2 API, we had a <code>LogNameOneof</code> class which
would be a <code>LogName</code>, <code>OrganizationLogName</code>, <code>FolderLogName</code>, or
<code>BillingLogName</code>.</p>
<p>The new generator generates a single <code>LogName</code> resource that can
handle each of the patterns, with a static factory method for each
one:</p>
<ul>
<li><code>FromProjectLog</code></li>
<li><code>FromOrganizationLog</code></li>
<li><code>FromFolderLog</code></li>
<li><code>FromBillingAccountLog</code></li>
</ul>
<h2 id="multi-resource-methods">Multi-resource methods</h2>
<p>Some RPCs accept multiple resource names. This is typically the
case when specifying the parent of a resource name which itself has
multiple patterns. Again, this was previously represented using a
&quot;one-of&quot; type, but the new generator creates an overload for each
resource type, as well as one accepting a string.</p>
<h2 id="common-resource-names">Common resource names</h2>
<p>In order to work with multiple APIs simply, some common resource
names are in GAX. These are:</p>
<ul>
<li><code>ProjectName</code></li>
<li><code>LocationName</code></li>
<li><code>OrganizationName</code></li>
<li><code>FolderName</code></li>
<li><code>BillingAccountName</code></li>
</ul>
<p>All of these are in the <code>Google.Api.Gax.ResourceNames</code> namespace.</p>
<p>Some API libraries previously used some of these resource name
patterns - particularly <code>LocationName</code> - but had their own types.
For example, the Logging API library used to include its own
<code>OrganizationName</code>, <code>BillingName</code>, <code>ProjectName</code> and <code>FolderName</code>
types, all within <code>Google.Cloud.Logging.V2</code>. These were maintained
across minor releases for backward compatibility, but have been
removed in the new major version.</p>
<p>Code broken by this change will normally just need to import the
<code>Google.Api.Gax.ResourceNames</code> namespace.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
